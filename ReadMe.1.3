#### R Script: Laakso and Taagepera's
#### Effective Number of Parties
#### by Santiago Alles 
#### PhD Student, Rice University

#### Updated to: 09/06/2014
#### version 1.3
#### Available at: http://www.santiago-alles.net/

Description

This function provides the Laakso and Taagepera's Effective Number of Parties (ENP) for both seats and votes. It stores the ENP in a data frame and it prints the results to a file.

#### Availability

The script is available at GitHub, and it can be called directly from the repository:

	source("https://raw.github.com/santiago-alles/enp.script/master/enp.v1.3.r")


#### Usage

enp.function(x, votes = TRUE, seats = TRUE, save = TRUE, plot = TRUE)


#### Arguments

	x       Data frame containing the input data set. The data set has to be a frame of n rows by 5 to 6 columns.

	votes   If TRUE, it estimates the electoral ENP using votes.

	seats   If TRUE, it estimates the legislative ENP using seats.

	save    If FALSE, it only keeps a data frame in memory with the results. If TRUE, it stores a file with the results in a new, self-generated folder, in addition to keeping results in memory. 

	plot   If TRUE, it generates a plot for each election, using ggplot2 package, reporting the requested ENP by electoral district.


#### Required packages 

doBy
ggplot2


#### Input Data

What is the required input data?

The dataset has to be a data frame of n rows by 5 or 6 columns. The dataset must be already stored in memory.

Which data has to be included in the dataset?

The dataset has to include the following variables:

	Year. It may be either a single year or multiple years. The variable has to be numeric.

	Chamber. It may be a single chamber or more than one. The variable may be coded as a string (i.e., “House”, "Senate"), or as numeric.

	District. The ENP will be aggregated at this level. It may be coded as a string (i.e., “Ayacucho”, “Cajamarca”, "Callao"), or as numeric.

	Party. Party labels running in a given election. The variable may be coded as a string.

	Votes. Number of votes for a given party in the district, in a given election year. The dataset do not need to be symmetrical: if a given party did not run in every district, it can be ommitted in those districts.

	Seats. Number of seats obtained by a given party in the district in a given election year. When a party did not get any seat in a given district, the cell should be empty.

The variables in the data frame have to be labeled as: "year", "chamber", "district", "party", "votes", "seats" (in lower case letters). The order of the columns does not matter until they are appropriately labeled.

Should data include blank and null votes?

No. Blank and null votes have to be excluded. Otherwise, the script will count them as a party and the ENP estimation
will be wrong.

What will be the output?

The ENP will be printed on the screen. If "save" is TRUE, a spreadsheet in a .csv file (which can be also open using Microsoft Excel) will be stored.

If "plot" is TRUE, graphs by year and chamber will be stored in .jpg format.
